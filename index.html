<!DOCTYPE html>
<html>
<head>
    <title>NFC Control</title>
</head>
<body>
    <audio id="audio" src="sound.mp3"></audio>
    <script>
        if ('NDEFReader' in window) {
            const reader = new NDEFReader();
            
            // Запрос разрешения при клике
            document.body.addEventListener('click', async () => {
                await reader.scan();
                console.log("Готово к сканированию NFC...");
            });

            // Обработка данных с метки
            reader.onreading = event => {
                const record = event.message.records[0];
                if (record.recordType === "json") {
                    const data = JSON.parse(record.data);
                    if (data.action === "play") {
                        document.getElementById("audio").play();
                    }
                }
            };
        } else {
            alert("Web NFC не поддерживается в вашем браузере!");
        }
    </script>
</body>
</html>
